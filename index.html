<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Excalibur — железо только для избранных</title>
  <meta name="description" content="Excalibur — магазин компьютерных комплектующих в неоновом геймерском стиле. Железо только для избранных." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0a0b12;
      --panel:#121426;
      --panel-2:#0f1122;
      --text:#e7e8ff;
      --muted:#9aa0c3;
      --accent:#6b9bff;
      --accent-2:#9f6bff;
      --ok:#44e1a6;
      --danger:#ff5c7c;
      --glass: rgba(255,255,255,0.06);
      --border: rgba(255,255,255,0.12);
      --shadow: 0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px var(--border);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; background: radial-gradient(1200px 600px at 80% -20%, #16204a55, transparent 60%),
                         radial-gradient(900px 500px at -10% 30%, #2a145555, transparent 60%),
                         var(--bg);
      color:var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height:1.5;
    }
    a{color:inherit; text-decoration:none}
    .container{width:100%; max-width:1200px; margin:0 auto; padding:0 16px}
    /* Header */
    header{
      position:sticky; top:0; z-index:50; backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(10,11,18,.85), rgba(10,11,18,.6));
      border-bottom:1px solid var(--border);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:16px; height:64px;
    }
    .logo{
      display:flex; align-items:center; gap:12px; font-family: Orbitron, sans-serif; letter-spacing:.5px;
    }
    .logo-badge{
      width:36px; height:36px; border-radius:10px; background:
      conic-gradient(from 210deg at 50% 50%, #6b9bff 0 25%, #9f6bff 25% 50%, #44e1a6 50% 75%, #ff5c7c 75% 100%);
      box-shadow: 0 0 24px #6b9bff55, 0 0 24px #9f6bff55 inset;
      display:grid; place-items:center;
    }
    .logo-badge svg{filter:drop-shadow(0 0 6px #6b9bff)}
    .brand{
      font-weight:800; font-size:20px;
      background: linear-gradient(90deg, #a7c0ff, #e0d4ff 50%, #a7fff0);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .tagline{font-size:12px; color:var(--muted); margin-top:-2px}
    .links{display:flex; gap:18px}
    .links a{
      padding:6px 10px; border-radius:10px; color:#d7dbff;
    }
    .links a:hover{background:var(--glass)}
    .hamb{display:none; background:none; border:0; color:var(--text)}
    @media (max-width:900px){
      .links{display:none}
      .hamb{display:block}
    }
    .mobile-menu{
      display:none; padding:8px 0 16px; border-bottom:1px solid var(--border);
    }
    .mobile-menu.open{display:block}
    .mobile-menu a{display:block; padding:12px 8px; color:#d7dbff}
    .cta{
      display:inline-grid; place-items:center; padding:10px 14px; border-radius:12px;
      background: linear-gradient(90deg, #3a64ff, #a45bff);
      box-shadow: 0 10px 25px #6b9bff44;
      font-weight:700;
      transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
    }
    .cta:hover{transform:translateY(-1px); filter:saturate(1.1)}
    /* Hero */
    .hero{
      padding:56px 0 24px; position:relative; overflow:hidden;
    }
    .grid-hero{
      display:grid; grid-template-columns: 1.2fr .8fr; gap:28px; align-items:center;
    }
    .h-title{
      font-family: Orbitron, sans-serif; font-size: clamp(28px, 5vw, 54px); line-height:1.06; margin:8px 0 12px;
      text-shadow: 0 0 20px #6b9bff33;
    }
    .h-desc{color:#bfc6ee; max-width:60ch}
    .stats{display:flex; flex-wrap:wrap; gap:16px; margin-top:18px}
    .pill{
      padding:10px 12px; border-radius:999px; background:var(--glass); border:1px solid var(--border); font-weight:600;
    }
    .hero-card{
      background: linear-gradient(180deg, #121426, #0d0f1e);
      border:1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow);
      padding:18px; position:relative; overflow:hidden;
    }
    .glow{
      position:absolute; inset:auto -20% -40% -20%; height:220px; filter:blur(48px);
      background: radial-gradient(400px 140px at 50% 0%, #6b9bff66, transparent 60%),
                  radial-gradient(300px 100px at 20% 50%, #9f6bff44, transparent 60%),
                  radial-gradient(300px 100px at 80% 50%, #44e1a644, transparent 60%);
      pointer-events:none;
    }
    .hero-card .row{display:flex; align-items:center; justify-content:space-between; gap:8px}
    .badge{
      display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid var(--border); border-radius:12px;
      background: linear-gradient(180deg, #1a1d39, #121426);
    }
    .badge svg{opacity:.85}
    .chips{display:flex; flex-wrap:wrap; gap:10px; margin-top:14px}
    .chip{
      padding:8px 10px; background:var(--glass); border:1px solid var(--border); border-radius:10px; font-size:12px; color:#cbd2ff
    }
    @media (max-width:900px){
      .grid-hero{grid-template-columns: 1fr; gap:20px}
      .hero{padding-top:24px}
    }
    /* Section */
    section{padding:40px 0}
    .section-title{
      font-family: Orbitron, sans-serif; font-size: clamp(22px, 3.4vw, 34px);
      margin:0 0 16px; letter-spacing:.3px
    }
    .section-sub{color:var(--muted); margin:0 0 18px}
    /* Tabs */
    .tabs{display:flex; gap:10px; flex-wrap:wrap}
    .tabs button{
      border:1px solid var(--border); background: linear-gradient(180deg, #141733, #0f1122);
      color:#dfe4ff; padding:10px 12px; border-radius:12px; cursor:pointer; font-weight:700;
      transition:transform .12s ease, box-shadow .12s ease, background .2s;
    }
    .tabs button.active{
      background:linear-gradient(90deg, #3a64ff, #a45bff); box-shadow:0 8px 20px #6b9bff55;
    }
    .tabbar{display:flex; gap:12px; overflow:auto; padding-bottom:8px; scrollbar-width:none}
    .tabbar::-webkit-scrollbar{display:none}
    /* Cards */
    .grid{
      display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:16px;
    }
    @media (max-width:1100px){ .grid{grid-template-columns: repeat(3,1fr)} }
    @media (max-width:800px){ .grid{grid-template-columns: repeat(2,1fr)} }
    @media (max-width:520px){ .grid{grid-template-columns: 1fr} }
    .card{
      position:relative; border-radius:14px; background: linear-gradient(180deg, #151733, #0e1124);
      border:1px solid var(--border); box-shadow: var(--shadow); overflow:hidden;
      transform: translateZ(0);
    }
    .card-media{
      height:160px; background: linear-gradient(135deg, #2b3b7a, #1a1f44); display:grid; place-items:center;
    }
    .card-media svg{opacity:.9; transform:scale(1.1)}
    .card-body{padding:12px}
    .card-title{margin:0 0 6px; font-weight:800}
    .card-spec{color:#b6bde0; font-size:13px; min-height:38px}
    .price{font-weight:800; font-size:18px; margin-top:6px}
    .row{display:flex; align-items:center; justify-content:space-between; gap:8px}
    .btn{
      border:1px solid var(--border); background: linear-gradient(180deg, #171a38, #0e1124);
      color:#e9ebff; padding:9px 12px; border-radius:10px; font-weight:700; cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, filter .2s ease;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background: linear-gradient(90deg, #3a64ff, #a45bff); box-shadow:0 10px 22px #6b9bff55}
    .flag{font-size:11px; color:#9ad8ff; background:rgba(106,155,255,0.14); padding:6px 8px; border-radius:999px; border:1px solid #6b9bff55}
    .card:hover{outline:1px solid #6b9bff66; box-shadow:0 10px 30px #6b9bff22}
    /* Reveal */
    .reveal{opacity:0; transform: translateY(12px); transition:opacity .6s ease, transform .6s ease}
    .reveal.on{opacity:1; transform:none}
    /* About & contact blocks */
    .panel{
      border:1px solid var(--border); background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border-radius: var(--radius); box-shadow: var(--shadow); padding:16px;
    }
    .two{display:grid; grid-template-columns: 1fr 1fr; gap:16px}
    @media (max-width:900px){ .two{grid-template-columns:1fr} }
    /* Footer */
    footer{padding:24px 0 60px; color:#a6aed8}
    .hr{height:1px; background:var(--border); margin:24px 0}
    /* Floating */
    .scrolltop{
      position:fixed; right:16px; bottom:16px; z-index:60; opacity:0; pointer-events:none;
      transition:opacity .2s ease, transform .2s ease;
    }
    .scrolltop.show{opacity:1; pointer-events:auto}
    .toast{
      position:fixed; left:50%; bottom:20px; transform:translateX(-50%); z-index:70;
      background:rgba(20,24,48,.9); border:1px solid var(--border); color:#dfe4ff;
      padding:10px 14px; border-radius:12px; display:none;
    }
    .toast.show{display:inline-block; animation: pop .22s ease}
    @keyframes pop{from{transform:translate(-50%,10px); opacity:.4} to{transform:translate(-50%,0); opacity:1}}
    /* Accessibility */
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important; scroll-behavior:auto !important}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav">
      <div class="logo">
        <div class="logo-badge" aria-hidden="true">
          <!-- sword icon -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M13 3l8 8-2 2-3-3-7.5 7.5a4 4 0 01-3 1.5H4v-1.5a4 4 0 011.5-3L13 8l-3-3 2-2z" stroke="#eaf1ff" stroke-width="1.6"/>
          </svg>
        </div>
        <div>
          <div class="brand">Excalibur</div>
          <div class="tagline">железо только для избранных</div>
        </div>
      </div>

      <nav class="links" aria-label="Основная навигация">
        <a href="#hero">Главная</a>
        <a href="#catalog">Каталог</a>
        <a href="#about">О нас</a>
        <a href="#contact">Контакты</a>
        <a class="cta" href="#catalog">Перейти в каталог</a>
      </nav>

      <button class="hamb" id="hamb" aria-label="Меню">
        <!-- burger -->
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
          <path d="M4 6h16M4 12h16M4 18h16" stroke="#e7e8ff" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    <div class="container mobile-menu" id="mobileMenu">
      <a href="#hero">Главная</a>
      <a href="#catalog">Каталог</a>
      <a href="#about">О нас</a>
      <a href="#contact">Контакты</a>
      <a class="cta" href="#catalog" style="display:inline-block;margin-top:8px;">Каталог</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="hero">
    <div class="container grid-hero">
      <div class="reveal">
        <span class="badge">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 12h16M12 4v16" stroke="#9ad8ff" stroke-width="2"/></svg>
          Сборки • Апгрейд • Сервис
        </span>
        <h1 class="h-title">Железо будущего, сегодня. <br>Подними FPS, не опуская стиль.</h1>
        <p class="h-desc">Только отборные процессоры, видеокарты и всё остальное — проверено бенчмарками и человеческой совестью. Выбирай комплектуху, собирай билд и жми старт.</p>
        <div class="stats">
          <div class="pill">RTX-серии • RDNA • Arc</div>
          <div class="pill">Intel • AMD • DDR4/DDR5</div>
          <div class="pill">Гарантия и поддержка</div>
        </div>
        <div style="margin-top:18px;display:flex;gap:12px;flex-wrap:wrap">
          <a class="cta" href="#catalog">В каталог</a>
          <a class="btn" href="#about">Почему мы?</a>
        </div>
      </div>

      <div class="hero-card reveal" aria-label="Витрина предложений">
        <div class="row">
          <div style="display:flex;align-items:center;gap:10px">
            <span class="flag">🔥 Топ недели</span>
            <span class="flag" style="background:rgba(68,225,166,.12); color:#a6ffe3; border-color:#44e1a655">Наличие</span>
          </div>
          <button class="btn" id="openQuick" aria-haspopup="dialog">Быстрый просмотр</button>
        </div>
        <div class="chips">
          <span class="chip">RTX 4070 / 4070 Ti Super</span>
          <span class="chip">Ryzen 7 / i5-14600KF</span>
          <span class="chip">32-64 ГБ DDR5</span>
          <span class="chip">NVMe Gen4/Gen5</span>
        </div>
        <div class="glow" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- Catalog -->
  <section id="catalog">
    <div class="container">
      <h2 class="section-title">Каталог</h2>
      <p class="section-sub">Выбери раздел. Вкладки скроллятся свайпом на телефоне.</p>
      <div class="tabbar" role="tablist" aria-label="Разделы каталога" id="tabbar">
        <div class="tabs">
          <button class="active" role="tab" data-tab="gpu">Видеокарты</button>
          <button role="tab" data-tab="cpu">Процессоры</button>
          <button role="tab" data-tab="mobo">Материнские платы</button>
          <button role="tab" data-tab="ram">Оперативная память</button>
          <button role="tab" data-tab="storage">Накопители</button>
          <button role="tab" data-tab="psu">Блоки питания</button>
          <button role="tab" data-tab="cooling">Охлаждение</button>
          <button role="tab" data-tab="cases">Корпуса</button>
          <button role="tab" data-tab="periph">Периферия</button>
        </div>
      </div>

      <!-- GRID -->
      <div class="grid" id="grid" aria-live="polite"></div>
    </div>
  </section>

  <!-- About / Contact -->
  <section id="about">
    <div class="container two">
      <div class="panel reveal">
        <h3 class="section-title" style="font-size:24px">Почему Excalibur?</h3>
        <p class="section-sub">Мы не гоним ширпотреб. Только то, что сами поставили бы себе в системник.</p>
        <ul style="margin:0; padding-left:18px; color:#c6cdf2">
          <li>Подбираем комплектующие под цель: киберспорт, 4K-кино, монтаж, стриминг.</li>
          <li>Проверяем совместимость и термопакет, не допускаем «бутылочных горлышек».</li>
          <li>Помогаем с BIOS, XMP/EXPO, кривыми вентиляторов и свежими драйверами.</li>
          <li>Даем честные рекомендации без маркетинговой поэзии.</li>
        </ul>
      </div>
      <div class="panel reveal" id="contact">
        <h3 class="section-title" style="font-size:24px">Связаться</h3>
        <p class="section-sub">Нужна консультация? Скинь нам свой текущий билд — подскажем апгрейд без лишних трат.</p>
        <form onsubmit="event.preventDefault(); showToast('Заявка отправлена. Перезвоним и соберём как надо.'); this.reset();" aria-label="Форма обратной связи">
          <div class="two" style="gap:10px">
            <input required placeholder="Ваше имя" aria-label="Ваше имя" style="padding:12px;border-radius:10px;border:1px solid var(--border);background:#0c0f22;color:var(--text)">
            <input required type="tel" placeholder="Телефон/Telegram" aria-label="Телефон" style="padding:12px;border-radius:10px;border:1px solid var(--border);background:#0c0f22;color:var(--text)">
          </div>
          <textarea placeholder="Кратко опишите задачу или текущую сборку" rows="4" style="margin-top:10px;width:100%;padding:12px;border-radius:10px;border:1px solid var(--border);background:#0c0f22;color:var(--text)"></textarea>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <button class="btn primary" type="submit">Отправить</button>
            <a href="#catalog" class="btn">В каталог</a>
          </div>
        </form>
      </div>
    </div>
  </section>

  <div class="container"><div class="hr" role="separator" aria-hidden="true"></div></div>

  <footer class="container">
    <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div>© <span id="year"></span> Excalibur — железо только для избранных</div>
      <div style="display:flex; gap:12px; align-items:center">
        <a class="flag" href="#contact">Подобрать сборку</a>
        <a class="flag" href="#hero">Наверх ↑</a>
      </div>
    </div>
  </footer>

  <!-- Scroll to top -->
  <button class="btn primary scrolltop" id="scrollTop" aria-label="Наверх">
    ↑
  </button>

  <!-- Quick View Modal (minimal) -->
  <dialog id="quick" style="width:min(560px, 92vw); border:none; padding:0; background:transparent">
    <div class="panel" style="padding:16px; position:relative">
      <button class="btn" onclick="closeQuick()" style="position:absolute; right:10px; top:10px">Закрыть</button>
      <h3 class="section-title" style="font-size:22px; margin-top:0">Готовая сборка «Excalibur Balanced»</h3>
      <p class="section-sub" style="margin-bottom:10px">1440p Ultra / eSports / Streaming</p>
      <div class="two" style="gap:10px">
        <div class="panel" style="min-height:120px; display:grid; place-items:center">
          <!-- simple GPU svg -->
          <svg width="120" height="60" viewBox="0 0 200 100" fill="none">
            <rect x="6" y="20" width="150" height="60" rx="10" stroke="#9ad8ff" fill="#1a2144"/>
            <circle cx="42" cy="50" r="18" stroke="#a45bff"/>
            <circle cx="102" cy="50" r="18" stroke="#6b9bff"/>
            <rect x="156" y="38" width="34" height="24" rx="4" fill="#6b9bff"/>
          </svg>
        </div>
        <div>
          <ul style="margin:0; padding-left:18px; color:#cbd2ff">
            <li>CPU: Intel Core i5-14600KF / Ryzen 7 7800X3D*</li>
            <li>GPU: GeForce RTX 4070 / 4070 Ti Super</li>
            <li>RAM: 32 ГБ DDR5 6000</li>
            <li>SSD: 1–2 ТБ NVMe Gen4</li>
            <li>PSU: 750–850W Gold, модульный</li>
          </ul>
          <div style="display:flex; gap:10px; margin-top:10px">
            <button class="btn primary" onclick="showToast('Добавлено в корзину (виртуальную).');">Добавить</button>
            <button class="btn" onclick="closeQuick()">Окей</button>
          </div>
        </div>
      </div>
      <small style="color:#97a0d4; display:block; margin-top:8px">*Подбираем под ваши задачи и бюджет.</small>
    </div>
  </dialog>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // Data (примерные карточки по разделам)
    const PRODUCTS = {
      gpu: [
        {title:'GeForce RTX 4070 Ti Super', spec:'16 ГБ GDDR6X, DLSS 3, Ray Tracing', price:'от 89990 ₽'},
        {title:'GeForce RTX 4060 Ti 16 ГБ', spec:'16 ГБ GDDR6, DLSS 3, энергоэффективность', price:'от 49990 ₽'},
        {title:'Radeon RX 7800 XT', spec:'16 ГБ GDDR6, FSR 3, 1440p Ultra', price:'от 62990 ₽'},
        {title:'Intel Arc A770 16 ГБ', spec:'XeSS, AV1, выгодный медиакодер', price:'от 34990 ₽'},
      ],
      cpu: [
        {title:'Intel Core i5-14600KF', spec:'6P+8E, 5.3 ГГц, идеален для 1440p', price:'от 32990 ₽'},
        {title:'Intel Core i7-14700K', spec:'8P+12E, 5.6 ГГц, стриминг и монтаж', price:'от 49990 ₽'},
        {title:'AMD Ryzen 7 7800X3D', spec:'3D V-Cache, топ для игр', price:'от 46990 ₽'},
        {title:'AMD Ryzen 5 7600', spec:'AM5, DDR5, апгрейд-платформа', price:'от 21990 ₽'},
      ],
      mobo: [
        {title:'B760 (Intel LGA1700)', spec:'PCIe 4.0, 2×M.2, VRM с радиаторами', price:'от 14990 ₽'},
        {title:'Z790 (Intel LGA1700)', spec:'PCIe 5.0, топ под разгон', price:'от 28990 ₽'},
        {title:'B650 (AM5)', spec:'DDR5, NVMe Gen4, разумный выбор', price:'от 17990 ₽'},
        {title:'X670E (AM5)', spec:'PCIe 5.0, энтузиасты и будущее', price:'от 39990 ₽'},
      ],
      ram: [
        {title:'32 ГБ DDR5-6000', spec:'CL30–36, двухканал, для игр/стрима', price:'от 11990 ₽'},
        {title:'64 ГБ DDR5-6000', spec:'Тяжёлые проекты и многозадачность', price:'от 22990 ₽'},
        {title:'32 ГБ DDR4-3600', spec:'Баланс для LGA1200/AM4', price:'от 7990 ₽'},
        {title:'16 ГБ DDR4-3200', spec:'Бюджетный апгрейд', price:'от 3990 ₽'},
      ],
      storage: [
        {title:'NVMe SSD Gen4 1 ТБ', spec:'Чтение до 7000 МБ/с', price:'от 6490 ₽'},
        {title:'NVMe SSD Gen4 2 ТБ', spec:'Игры + проекты', price:'от 10990 ₽'},
        {title:'SATA SSD 1 ТБ', spec:'Надёжно и недорого', price:'от 4990 ₽'},
        {title:'HDD 4 ТБ', spec:'Архив и медиа', price:'от 6990 ₽'},
      ],
      psu: [
        {title:'750W Gold (modular)', spec:'Тихий, запас под апгрейд', price:'от 7990 ₽'},
        {title:'850W Gold', spec:'Для 4070 Ti/4080', price:'от 9990 ₽'},
        {title:'1000W Platinum', spec:'Энтузиасты/разгон', price:'от 16990 ₽'},
        {title:'650W Bronze', spec:'Бюджет для mid-range', price:'от 4990 ₽'},
      ],
      cooling: [
        {title:'AIO 360 мм', spec:'Тихо и холодно, RGB умеренно', price:'от 12990 ₽'},
        {title:'AIO 240 мм', spec:'Компактные корпуса', price:'от 8990 ₽'},
        {title:'Башня 6 heatpipes', spec:'Отличный воздух', price:'от 5990 ₽'},
        {title:'Вентиляторы 120 мм (3шт)', spec:'PWM, ARGB, комплект', price:'от 2990 ₽'},
      ],
      cases: [
        {title:'Mid-Tower Airflow', spec:'Сетка, 4×120 мм, стекло', price:'от 6990 ₽'},
        {title:'Compact mATX', spec:'Минимализм и продув', price:'от 5890 ₽'},
        {title:'Premium ATX', spec:'Алюминий, шумоизоляция', price:'от 12990 ₽'},
        {title:'ITX Cube', spec:'Мал да удал', price:'от 8990 ₽'},
      ],
      periph: [
        {title:'Клава механика', spec:'Hot-swap, PBT, тишина кликов', price:'от 5990 ₽'},
        {title:'Мышь eSports', spec:'<60 г, 26K DPI', price:'от 3990 ₽'},
        {title:'Гарнитура', spec:'Лёгкая, позиционка', price:'от 4990 ₽'},
        {title:'Монитор 27" 165 Гц', spec:'IPS/VA, 1440p', price:'от 16990 ₽'},
      ],
    };

    // Render
    const grid = document.getElementById('grid');
    const tabbar = document.getElementById('tabbar');
    function renderCards(kind='gpu'){
      grid.innerHTML = '';
      PRODUCTS[kind].forEach((p,i)=>{
        const card = document.createElement('article');
        card.className='card reveal';
        card.setAttribute('tabindex','0');
        card.innerHTML = `
          <div class="card-media" aria-hidden="true">
            ${iconFor(kind)}
          </div>
          <div class="card-body">
            <div class="row">
              <h3 class="card-title">${p.title}</h3>
              <span class="flag">${i===0?'Хит':'Новинка'}</span>
            </div>
            <div class="card-spec">${p.spec}</div>
            <div class="row" style="margin-top:8px">
              <div class="price">${p.price}</div>
              <div style="display:flex; gap:8px">
                <button class="btn" onclick="showToast('Добавлено в сравнение');">Сравнить</button>
                <button class="btn primary" onclick="showToast('Добавлено в корзину (виртуальную)')">В корзину</button>
              </div>
            </div>
          </div>`;
        grid.appendChild(card);
      });
      // reveal animate
      requestAnimationFrame(()=>observeReveals());
    }

    function iconFor(kind){
      // simple inline svgs to avoid external assets
      if(kind==='gpu') return `<svg width="180" height="90" viewBox="0 0 220 120" fill="none">
        <rect x="10" y="30" width="160" height="60" rx="10" fill="#1a2148" stroke="#6b9bff"/>
        <circle cx="56" cy="60" r="18" stroke="#a45bff"/>
        <circle cx="116" cy="60" r="18" stroke="#6b9bff"/>
        <rect x="174" y="48" width="36" height="24" rx="4" fill="#6b9bff"/>
      </svg>`;
      if(kind==='cpu') return `<svg width="120" height="120" viewBox="0 0 120 120" fill="none">
        <rect x="20" y="20" width="80" height="80" rx="10" fill="#1a2148" stroke="#a45bff" />
        <rect x="38" y="38" width="44" height="44" rx="4" stroke="#6b9bff"/>
      </svg>`;
      if(kind==='mobo') return `<svg width="180" height="90" viewBox="0 0 200 100" fill="none">
        <rect x="8" y="8" width="184" height="84" rx="8" fill="#151c3e" stroke="#6b9bff"/>
        <rect x="20" y="20" width="60" height="60" stroke="#a45bff"/>
        <rect x="92" y="20" width="40" height="20" stroke="#6b9bff"/>
        <rect x="92" y="46" width="40" height="34" stroke="#6b9bff"/>
      </svg>`;
      if(kind==='ram') return `<svg width="180" height="90" viewBox="0 0 220 100" fill="none">
        <rect x="10" y="30" width="200" height="40" rx="6" fill="#1a2148" stroke="#6b9bff"/>
        <rect x="24" y="38" width="28" height="24" rx="3" fill="#2b356a"/>
        <rect x="58" y="38" width="28" height="24" rx="3" fill="#2b356a"/>
        <rect x="92" y="38" width="28" height="24" rx="3" fill="#2b356a"/>
        <rect x="126" y="38" width="28" height="24" rx="3" fill="#2b356a"/>
      </svg>`;
      if(kind==='storage') return `<svg width="180" height="90" viewBox="0 0 220 100" fill="none">
        <rect x="10" y="20" width="200" height="60" rx="8" fill="#15204a" stroke="#6b9bff"/>
        <circle cx="60" cy="50" r="18" stroke="#a45bff"/>
        <rect x="120" y="38" width="70" height="24" rx="4" fill="#6b9bff"/>
      </svg>`;
      if(kind==='psu') return `<svg width="180" height="90" viewBox="0 0 220 100" fill="none">
        <rect x="20" y="20" width="180" height="60" rx="8" fill="#121a3d" stroke="#6b9bff"/>
        <circle cx="70" cy="50" r="16" stroke="#a45bff"/>
        <path d="M60 50h20" stroke="#a45bff"/>
      </svg>`;
      if(kind==='cooling') return `<svg width="180" height="90" viewBox="0 0 220 100" fill="none">
        <rect x="30" y="20" width="160" height="60" rx="8" fill="#141c3f" stroke="#6b9bff"/>
        <circle cx="80" cy="50" r="18" stroke="#a45bff"/>
        <circle cx="140" cy="50" r="18" stroke="#6b9bff"/>
      </svg>`;
      if(kind==='cases') return `<svg width="120" height="120" viewBox="0 0 120 120" fill="none">
        <rect x="34" y="16" width="52" height="88" rx="8" fill="#151c3e" stroke="#6b9bff"/>
        <rect x="42" y="28" width="36" height="60" rx="4" stroke="#a45bff"/>
      </svg>`;
      return `<svg width="180" height="90" viewBox="0 0 220 100" fill="none">
        <rect x="20" y="20" width="180" height="60" rx="8" fill="#141c3f" stroke="#6b9bff"/>
        <rect x="34" y="34" width="60" height="32" rx="6" stroke="#a45bff"/>
        <rect x="106" y="34" width="80" height="32" rx="6" stroke="#6b9bff"/>
      </svg>`;
    }

    // Tabs
    tabbar.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-tab]');
      if(!btn) return;
      document.querySelectorAll('[role="tab"]').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      renderCards(btn.dataset.tab);
    });

    // Mobile menu
    const hamb = document.getElementById('hamb');
    const mobileMenu = document.getElementById('mobileMenu');
    hamb.addEventListener('click', ()=>{
      mobileMenu.classList.toggle('open');
    });
    mobileMenu.addEventListener('click', (e)=>{
      if(e.target.tagName === 'A') mobileMenu.classList.remove('open');
    });

    // Reveal on scroll
    let observer;
    function observeReveals(){
      if(observer) observer.disconnect();
      observer = new IntersectionObserver((entries)=>{
        entries.forEach(en=>{
          if(en.isIntersecting) en.target.classList.add('on');
        });
      }, {threshold:.1});
      document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));
    }

    // Smooth fallback for iOS old (most modern Safari supports CSS smooth)
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if(el){
          e.preventDefault();
          el.scrollIntoView({behavior:'smooth', block:'start'});
        }
      });
    });

    // Quick view dialog
    const dlg = document.getElementById('quick');
    document.getElementById('openQuick').addEventListener('click', ()=>{ dlg.showModal(); });
    function closeQuick(){ dlg.close(); }
    window.closeQuick = closeQuick;

    // Toasts
    const toast = document.getElementById('toast');
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 1800);
    }
    window.showToast = showToast;

    // ScrollTop
    const scrollTopBtn = document.getElementById('scrollTop');
    window.addEventListener('scroll', ()=>{
      if(window.scrollY > 300) scrollTopBtn.classList.add('show');
      else scrollTopBtn.classList.remove('show');
    });
    scrollTopBtn.addEventListener('click', ()=>window.scrollTo({top:0, behavior:'smooth'}));

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Initial render
    renderCards('gpu');
    observeReveals();
  </script>
</body>
</html>
